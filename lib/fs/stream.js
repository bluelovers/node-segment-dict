"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const line_1 = require("./line");
function createLoadStream(file, options = {}) {
    options.onready = options.onready || function (src, ...argv) {
        this.value = this.value || [];
    };
    options.mapper = options.mapper || function (data) {
        return data;
    };
    options.ondata = options.ondata || function (data) {
        this.value = this.value || [];
        this.value.push(data);
    };
    let stream = line_1.createStreamLine(file, options.mapper, {
        onready: options.onready,
        ondata: options.ondata,
        onclose() {
            if (options.callback) {
                options.callback.call(this, null, stream.value, stream);
            }
        },
    });
    return stream;
}
exports.createLoadStream = createLoadStream;
exports.default = createLoadStream;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3RyZWFtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaUNBQWdFO0FBT2hFLFNBQWdCLGdCQUFnQixDQUFJLElBQVksRUFBRSxVQVM5QyxFQUFFO0lBR0wsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxJQUFJLFVBQVUsR0FBRyxFQUFFLEdBQUcsSUFBSTtRQUUxRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO0lBQy9CLENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sSUFBSSxVQUFVLElBQUk7UUFFaEQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDLENBQUM7SUFFRixPQUFPLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLElBQUksVUFBVSxJQUFJO1FBRWhELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDO0lBRUYsSUFBSSxNQUFNLEdBQThCLHVCQUFnQixDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsTUFBTSxFQUFFO1FBRTlFLE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBTztRQUV4QixNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07UUFFdEIsT0FBTztZQUVOLElBQUksT0FBTyxDQUFDLFFBQVEsRUFDcEI7Z0JBQ0MsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFBO2FBQ3ZEO1FBQ0YsQ0FBQztLQUNELENBQUMsQ0FBQztJQUVILE9BQU8sTUFBTSxDQUFDO0FBQ2YsQ0FBQztBQTVDRCw0Q0E0Q0M7QUFFRCxrQkFBZSxnQkFBZ0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVN0cmVhbUxpbmUsIElTdHJlYW1MaW5lV2l0aFZhbHVlIH0gZnJvbSAnLi9saW5lJztcblxuZXhwb3J0IGludGVyZmFjZSBJQ2FsbGJhY2s8VD5cbntcblx0KGVycjogRXJyb3IsIGRhdGE/OiBULCBzdHJlYW0/OiBJU3RyZWFtTGluZVdpdGhWYWx1ZTxUPik6IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxvYWRTdHJlYW08VD4oZmlsZTogc3RyaW5nLCBvcHRpb25zOiB7XG5cblx0bWFwcGVyPyhsaW5lOiBzdHJpbmcpLFxuXHRvbmRhdGE/KGRhdGEpLFxuXG5cdGNhbGxiYWNrPzogSUNhbGxiYWNrPFQ+LFxuXG5cdG9ucmVhZHk/KC4uLmFyZ3YpLFxuXG59ID0ge30pOiBJU3RyZWFtTGluZVdpdGhWYWx1ZTxUPlxue1xuXG5cdG9wdGlvbnMub25yZWFkeSA9IG9wdGlvbnMub25yZWFkeSB8fCBmdW5jdGlvbiAoc3JjLCAuLi5hcmd2KVxuXHR7XG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgfHwgW107XG5cdH07XG5cblx0b3B0aW9ucy5tYXBwZXIgPSBvcHRpb25zLm1hcHBlciB8fCBmdW5jdGlvbiAoZGF0YSlcblx0e1xuXHRcdHJldHVybiBkYXRhO1xuXHR9O1xuXG5cdG9wdGlvbnMub25kYXRhID0gb3B0aW9ucy5vbmRhdGEgfHwgZnVuY3Rpb24gKGRhdGEpXG5cdHtcblx0XHR0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSB8fCBbXTtcblx0XHR0aGlzLnZhbHVlLnB1c2goZGF0YSk7XG5cdH07XG5cblx0bGV0IHN0cmVhbTogSVN0cmVhbUxpbmVXaXRoVmFsdWU8YW55PiA9IGNyZWF0ZVN0cmVhbUxpbmUoZmlsZSwgb3B0aW9ucy5tYXBwZXIsIHtcblxuXHRcdG9ucmVhZHk6IG9wdGlvbnMub25yZWFkeSxcblxuXHRcdG9uZGF0YTogb3B0aW9ucy5vbmRhdGEsXG5cblx0XHRvbmNsb3NlKClcblx0XHR7XG5cdFx0XHRpZiAob3B0aW9ucy5jYWxsYmFjaylcblx0XHRcdHtcblx0XHRcdFx0b3B0aW9ucy5jYWxsYmFjay5jYWxsKHRoaXMsIG51bGwsIHN0cmVhbS52YWx1ZSwgc3RyZWFtKVxuXHRcdFx0fVxuXHRcdH0sXG5cdH0pO1xuXG5cdHJldHVybiBzdHJlYW07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUxvYWRTdHJlYW07XG4iXX0=